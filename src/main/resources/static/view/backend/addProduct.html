<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link href="../../static/plugins/layui/css/layui.css" rel="stylesheet" type="text/css"/>
    <title>3C数码-后台商品详情</title>
</head>
<body >
<style>
    .input-group-addon {
        padding: 11px 14px;
        font-size: 14px;
        font-weight: 400;
        line-height: 3;
        color: #555;
        text-align: center;
        background-color: #eee;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
</style>
<div style="padding-left: 10%; padding-right: 10%">

    <div id="topNav"></div>

    <h1 class="layui-table-header" style="margin: 5px"><span style="color: #666">3C数码-添加商品</span></h3>

    <form class="layui-form" style="margin-top: 23px">
        <div class="layui-form-item">
            <label class="layui-form-label">商品名称</label>
            <div class="layui-input-block">
                <input type="text" name="title" required  lay-verify="required" placeholder="请输入商品名称" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">商品描述</label>
            <div class="layui-input-block">
                <input type="text" name="title" required  lay-verify="required" placeholder="请输入商品描述" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">所属分类</label>
            <div class="layui-input-block">
                <select id="firstSelect"  lay-verify="required">
                    <option value=""></option>
                </select>
                <!--<select id="secondSelect" lay-verify="required" lay-search>-->
                    <!--<option value=""></option>-->
                    <!--<option value="0">北京</option>-->
                    <!--<option value="1">上海</option>-->
                    <!--<option value="2">广州</option>-->
                    <!--<option value="3">深圳</option>-->
                    <!--<option value="4">杭州</option>-->
                <!--</select>-->
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">商品价格</label>
            <div class="layui-input-block">
                <input type="text" name="title" required  lay-verify="required" placeholder="价格" autocomplete="off" class="layui-input" style="width: 20%; float: left" >
                <span class="input-group-addon">元</span>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">商品库存</label>
            <div class="layui-input-block">
                <input type="text" name="title" required  lay-verify="required" placeholder="库存" autocomplete="off" class="layui-input" style="width: 20%; float: left" >

                <span class="input-group-addon">件</span>

            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">上传图片</label>

            <div class="layui-upload">
                <button type="button" class="layui-btn" id="test1">上传图片</button>

                <div class="layui-upload-list">
                    <img class="layui-upload-img" id="demo1" style="text-align: center; max-width: 400px; max-height: 400px;">
                    <p id="demoText" style="text-align: center"></p>
                </div>

            </div>
        </div>

        <textarea id="richEdit" style="display: none; margin-bottom: 30px"></textarea>

    </form>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button id="save" class="layui-btn" lay-submit lay-filter="formDemo">保存</button>
            </div>
        </div>
</div>
<script src="../../static/plugins/jQuery/jquery-1.12.1.min.js" type="text/javascript"></script>
<script src="../../static/scripts/xingsu.ajax.auth.js" type="text/javascript"></script>
<script src="../../static/scripts/xingsu.config.js" type="text/javascript"></script>
<script src="../../static/scripts/xingsu.extensions.js" type="text/javascript"></script>
<script src="../../static/scripts/xingsu.util.js" type="text/javascript"></script>
<script src="../../static/plugins/layer/layer.js" type="text/javascript"></script>
<script src="../../static/plugins/layui/layui.js" type="text/javascript"></script>
<script src="../../static/scripts/xingsu.backend.topnav.js" type="text/javascript"></script>


<script type="text/javascript">
    $(function () {
        //联表查询
        var optionStr = "<option value='{0}'>{1}</option>";
        var optionStrTemp = "";
        var ajaxUrl = "../../manage/category/get_category.do?categoryId=100001";
        $ajax.ajax(ajaxUrl, null, $config.HttpVerbs.GET, function (result) {
            if(!result.success){
                console.log(result);
                return;
            }
            $.each(result.data, function (index, value) {
                ajaxUrl = "../../manage/category/get_category.do?categoryId=" + value.id;
                $ajax.ajax(ajaxUrl, null, $config.HttpVerbs.GET, function (result2) {
                    if(!result2.success){
                        console.log(result2);
                        return;
                    }
                    $.each(result2.data, function (index2, value2) {
                        optionStrTemp += String.format(optionStr, value2.id, value2.name);

                    });
                }, {async:false});
            });

            $("#firstSelect").append(optionStrTemp);


        });







        layui.use('form', function(){
//            var form = layui.form;
//
//            //监听提交
//            form.on('submit(formDemo)', function(data){
//                layer.msg(JSON.stringify(data.field));
//                return false;
//            });
        });

        layui.use('upload', function() {
            var $ = layui.jquery
                , upload = layui.upload;

            //普通图片上传
            var uploadInst = upload.render({
                elem: '#test1'
                , url: '/upload/'
                , before: function (obj) {
                    //预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {
                        $('#demo1').attr('src', result); //图片链接（base64）
                    });
                }
                , done: function (res) {
                    //如果上传失败
                    if (res.code > 0) {
                        return layer.msg('上传失败');
                    }
                    //上传成功
                }
                , error: function () {
                    //演示失败状态，并实现重传
                    var demoText = $('#demoText');
                    demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
                    demoText.find('.demo-reload').on('click', function () {
                        uploadInst.upload();
                    });
                }
            });
        });

        layui.use('layedit', function(){
            var layedit = layui.layedit;

            layedit.set({
                uploadImage: {
                    url: '' //接口url
                    ,type: '' //默认post
                }
            });

            layedit.build('richEdit'); //建立编辑器
        });

        $("#save").click(function () {
            console.log($("#firstSelect"))
        });
    });

</script>
</body>
</html>